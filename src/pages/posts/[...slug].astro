---
import { getCollection, render } from "astro:content";
import Layout from "src/layouts/Layout.astro";
import "src/styles/md-post.scss";

export async function getStaticPaths() {
    const postsEntries = await getCollection("posts");
    return postsEntries.map((entry) => ({
        params: { slug: entry.id },
        props: { entry },
    }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
const articleInfo = {
    authorName: entry.data.author,
    postedAt: entry.data.published,
    updatedAt: new Date().toISOString()
}
const description = entry.data?.description;
---

<Layout title={`Posts - ${entry.data.title}`} {description} {articleInfo}>
    <article id="blog-post" class="max-w-3xl mx-auto text-[#222]">
        <Content />
    </article>
</Layout>

<style lang="scss">
    /*@reference "src/styles/global.css";

    article {
        @apply max-w-[750px] mx-auto text-[#333];
    }*/
</style>
